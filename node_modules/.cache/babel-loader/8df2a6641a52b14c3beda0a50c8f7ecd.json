{"ast":null,"code":"var _jsxFileName = \"e:\\\\NODE_JS\\\\DM\\\\KCPM_K15A_WEBSITE_NHAN_DIEN_GT_VB\\\\src\\\\components\\\\item.js\";\nimport React, { Component } from 'react';\nimport * as tf from '@tensorflow/tfjs';\nimport dl from './Data/DulieuHuanLuyen.json';\n\nclass item extends Component {\n  constructor(props) {\n    super(props);\n\n    this.showconten = () => {\n      if (this.props.dulieushh.nationality === \"N/A\") {\n        return React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17\n          },\n          __self: this\n        }, \"H\\xECnh \\u1EA3nh \\u0111\\u1EA7u v\\xE0o : ch\\u1EE9ng minh nh\\xE2n d\\xE2n (Lo\\u1EA1i c\\u0169) \");\n      } else if (this.props.dulieushh.nationality === undefined) {\n        return React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        }, \"H\\xECnh \\u1EA3nh \\u0111\\u1EA7u v\\xE0o : ch\\u1EE9ng minh nh\\xE2n d\\xE2n (Lo\\u1EA1i m\\u1EDBi) \");\n      } else {\n        return React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, \"H\\xECnh \\u1EA3nh \\u0111\\u1EA7u v\\xE0o :  C\\u0103n c\\u01B0\\u1EDBc c\\xF4ng d\\xE2n\");\n      }\n    };\n\n    this.tensorflowtinhtoan = () => {\n      let names = [];\n      let sexs = [];\n      let sexname = [\"NAM\", \"NỮ\"];\n      dl.map(item => {\n        names.push((item.namecat.charCodeAt(0) + item.namecat.charCodeAt(1) + item.namecat.charCodeAt(2) - 169) / 77);\n        sexs.push(sexname.indexOf(item.sexcat));\n        return 0;\n      });\n      console.log(names); // dua data ve tensor\n\n      let xs = tf.tensor1d(names);\n      let convetys = tf.tensor1d(sexs, 'int32');\n      let ys = tf.oneHot(convetys, 2);\n      console.log(sexs);\n      console.log(ys); // dua ve model va cac mo hinh\n\n      let model = tf.sequential();\n      let HiddenLayOut = tf.layers.dense({\n        units: 16,\n        activation: 'sigmoid',\n        inputDim: 1\n      });\n      let OutPutLayOut = tf.layers.dense({\n        activation: 'softmax',\n        units: 2\n      });\n      model.add(HiddenLayOut);\n      model.add(OutPutLayOut);\n      model.compile({\n        optimizer: tf.train.sgd(0, 2),\n        loss: 'categoricalCrossentropy'\n      });\n      console.log(\"Đang tự học\"); // train data\n\n      async function train() {\n        let option = {\n          epochs: 200,\n          validationSplit: 0.1,\n          shuffle: true\n        };\n        return await model.fit(xs, ys, option);\n      }\n\n      train().then(res => {\n        console.log(\"học hỏi thành công\");\n        console.log(res.history.loss);\n        let data = this.props.dulieushh.name;\n        let cut = data.slice(-3);\n\n        function to_slug(str) {\n          // Chuyển hết sang chữ thường\n          str = str.toLowerCase(); // xóa dấu\n\n          str = str.replace(/(à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ)/g, 'a');\n          str = str.replace(/(è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ)/g, 'e');\n          str = str.replace(/(ì|í|ị|ỉ|ĩ)/g, 'i');\n          str = str.replace(/(ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ)/g, 'o');\n          str = str.replace(/(ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ)/g, 'u');\n          str = str.replace(/(ỳ|ý|ỵ|ỷ|ỹ)/g, 'y');\n          str = str.replace(/(đ)/g, 'd'); // Xóa ký tự đặc biệt\n\n          str = str.replace(/([^0-9a-z-\\s])/g, ''); // Xóa khoảng trắng thay bằng ký tự -\n\n          str = str.replace(/(\\s+)/g, ''); // xóa phần dự - ở đầu\n\n          str = str.replace(/^-+/g, ''); // xóa phần dư - ở cuối\n\n          str = str.replace(/-+$/g, ''); // return\n\n          return str;\n        }\n\n        let all = to_slug(cut);\n        let ket = all.toUpperCase(); // ket qua train\n\n        let dataconvetint32 = (ket.charCodeAt(0) + ket.charCodeAt(1) + ket.charCodeAt(2) - 169) / 77;\n        let tensordata = tf.tensor1d([dataconvetint32]);\n        let aws = model.predict(tensordata);\n        let max = aws.argMax(1).dataSync()[0];\n        let ketqua = sexname[max];\n        this.setState({\n          ketquachinhthuc: ketqua\n        });\n        console.log(this.state.ketquachinhthuc);\n      });\n    };\n\n    this.phongdoangioitinh = () => {\n      if (this.props.dulieushh.sex === \"N/A\") {\n        return React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn btn-success\",\n          onClick: () => this.tensorflowtinhtoan(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, \"T\\u1EF0 H\\u1ECCC\");\n      } else {\n        return this.props.dulieushh.sex;\n      }\n    };\n\n    this.state = {\n      data: this.props.dulieushh,\n      ketquachinhthuc: ''\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, this.showconten(), React.createElement(\"div\", {\n      className: \"card text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.props.dulieushh.cropped_idcard && React.createElement(\"img\", {\n      className: \"card-img-top\",\n      width: \"120px\",\n      src: this.props.dulieushh.cropped_idcard,\n      alt: \"demo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), this.props.dulieushh && React.createElement(\"img\", {\n      className: \"card-img-top\",\n      width: \"120px\",\n      src: this.props.dulieushh,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, this.props.dulieushh.face && React.createElement(\"img\", {\n      className: \"card-img-top left_manager\",\n      style: {\n        width: '240px',\n        height: '300px',\n        marginRight: '40px'\n      },\n      src: this.props.dulieushh.face,\n      alt: \"demo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"card-body\",\n      style: {\n        paddingTop: '0px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.props.dulieushh.name && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"T\\xEAn : \", this.props.dulieushh.name), this.props.dulieushh.address && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"\\u0110\\u1ECBa ch\\u1EC9 : \", this.props.dulieushh.address), this.props.dulieushh.home && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"\\u0110\\u1ECBa ch\\u1EC9 \\u0111\\u0103ng k\\xFD : \", this.props.dulieushh.home), this.props.dulieushh.id && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"S\\u1ED1 cmnd : \", this.props.dulieushh.id), this.props.dulieushh.dob && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Ng\\xE0y sinh : \", this.props.dulieushh.dob), this.props.dulieushh.sex && React.createElement(\"h5\", {\n      className: \"card-title color_mana  mb-10\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Gi\\u1EDBi t\\xEDnh : \", this.phongdoangioitinh(), \"     \", this.state.ketquachinhthuc), this.props.dulieushh.doe && React.createElement(\"h5\", {\n      className: \"card-title color_mana\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Ng\\xE0y h\\u1EBFt h\\u1EA1n : \", this.props.dulieushh.doe), this.props.dulieushh.nationality && React.createElement(\"h5\", {\n      className: \"card-title color_mana\",\n      style: {\n        marginBottom: '16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Qu\\u1ED1c t\\u1ECBch : \", this.props.dulieushh.nationality))))));\n  }\n\n}\n\nexport default item;","map":{"version":3,"sources":["e:\\NODE_JS\\DM\\KCPM_K15A_WEBSITE_NHAN_DIEN_GT_VB\\src\\components\\item.js"],"names":["React","Component","tf","dl","item","constructor","props","showconten","dulieushh","nationality","undefined","tensorflowtinhtoan","names","sexs","sexname","map","push","namecat","charCodeAt","indexOf","sexcat","console","log","xs","tensor1d","convetys","ys","oneHot","model","sequential","HiddenLayOut","layers","dense","units","activation","inputDim","OutPutLayOut","add","compile","optimizer","train","sgd","loss","option","epochs","validationSplit","shuffle","fit","then","res","history","data","name","cut","slice","to_slug","str","toLowerCase","replace","all","ket","toUpperCase","dataconvetint32","tensordata","aws","predict","max","argMax","dataSync","ketqua","setState","ketquachinhthuc","state","phongdoangioitinh","sex","render","cropped_idcard","face","width","height","marginRight","paddingTop","marginBottom","address","home","id","dob","doe"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport dl from './Data/DulieuHuanLuyen.json';\r\nclass item extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data : this.props.dulieushh,\r\n            ketquachinhthuc : ''\r\n        };\r\n    }\r\n    showconten = () => {\r\n        if(this.props.dulieushh.nationality === \"N/A\")\r\n        {\r\n            return (\r\n                <h4>Hình ảnh đầu vào : chứng minh nhân dân (Loại cũ) </h4>\r\n                \r\n            )\r\n        }\r\n        else if (this.props.dulieushh.nationality === undefined)\r\n        {\r\n            return (\r\n                <h4>Hình ảnh đầu vào : chứng minh nhân dân (Loại mới) </h4>\r\n            )\r\n        }\r\n        else\r\n        {\r\n            return (\r\n                <h4>Hình ảnh đầu vào :  Căn cước công dân</h4>\r\n            )\r\n        }\r\n    }\r\n\r\n    tensorflowtinhtoan = () => {\r\n            let  names = [];\r\n            let sexs = [];\r\n            let sexname = [\"NAM\",\"NỮ\"];\r\n    \r\n            dl.map((item) => {\r\n                names.push((((item.namecat).charCodeAt(0) + (item.namecat).charCodeAt(1) + (item.namecat).charCodeAt(2))-169)/77);\r\n                sexs.push(sexname.indexOf(item.sexcat));\r\n                return 0;\r\n            })\r\n            console.log(names);\r\n    \r\n            \r\n            // dua data ve tensor\r\n            let xs = tf.tensor1d(names);\r\n            let convetys = tf.tensor1d(sexs,'int32');\r\n            let ys = tf.oneHot(convetys,2);\r\n            console.log(sexs);\r\n            console.log(ys);\r\n    \r\n            // dua ve model va cac mo hinh\r\n    \r\n            let model = tf.sequential();\r\n            let HiddenLayOut = tf.layers.dense({\r\n                units : 16,\r\n                activation : 'sigmoid',\r\n                inputDim : 1,\r\n            })\r\n            let OutPutLayOut = tf.layers.dense({\r\n                activation : 'softmax',\r\n                units : 2\r\n            })\r\n    \r\n            model.add(HiddenLayOut);\r\n            model.add(OutPutLayOut);\r\n            model.compile({\r\n                optimizer : tf.train.sgd(0,2),\r\n                loss: 'categoricalCrossentropy'\r\n            })\r\n    \r\n            console.log(\"Đang tự học\");\r\n    \r\n    \r\n            // train data\r\n            async function train(){\r\n                let option =\r\n                {\r\n                   \t\tepochs : 200,\r\n                     validationSplit : 0.1,\r\n                     shuffle : true\r\n                }\r\n                return await model.fit(xs , ys , option );\r\n                \r\n            }\r\n    \r\n            train().then((res) => {\r\n                console.log(\"học hỏi thành công\");\r\n                console.log(res.history.loss);\r\n    \r\n                let data = this.props.dulieushh.name;\r\n                let cut = data.slice(-3);\r\n                function to_slug(str)\r\n                {\r\n                    // Chuyển hết sang chữ thường\r\n                    str = str.toLowerCase();     \r\n                \r\n                    // xóa dấu\r\n                    str = str.replace(/(à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ)/g, 'a');\r\n                    str = str.replace(/(è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ)/g, 'e');\r\n                    str = str.replace(/(ì|í|ị|ỉ|ĩ)/g, 'i');\r\n                    str = str.replace(/(ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ)/g, 'o');\r\n                    str = str.replace(/(ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ)/g, 'u');\r\n                    str = str.replace(/(ỳ|ý|ỵ|ỷ|ỹ)/g, 'y');\r\n                    str = str.replace(/(đ)/g, 'd');\r\n                \r\n                    // Xóa ký tự đặc biệt\r\n                    str = str.replace(/([^0-9a-z-\\s])/g, '');\r\n                \r\n                    // Xóa khoảng trắng thay bằng ký tự -\r\n                    str = str.replace(/(\\s+)/g, '');\r\n                \r\n                    // xóa phần dự - ở đầu\r\n                    str = str.replace(/^-+/g, '');\r\n                \r\n                    // xóa phần dư - ở cuối\r\n                    str = str.replace(/-+$/g, '');\r\n                \r\n                    // return\r\n                    return str;\r\n                }\r\n                let all =  to_slug(cut);\r\n                let ket = all.toUpperCase();\r\n            \r\n                // ket qua train\r\n                let dataconvetint32 = (((ket.charCodeAt(0) + ket.charCodeAt(1) + ket.charCodeAt(2)) - 169) / 77);\r\n                let tensordata = tf.tensor1d([dataconvetint32]);\r\n                let aws = model.predict(tensordata);\r\n                let max = aws.argMax(1).dataSync()[0];\r\n                let ketqua = sexname[max];\r\n                this.setState({\r\n                    ketquachinhthuc : ketqua\r\n                });\r\n                console.log(this.state.ketquachinhthuc);\r\n            })\r\n    }\r\n\r\n\r\n\r\n    phongdoangioitinh = () => {\r\n        if(this.props.dulieushh.sex === \"N/A\")\r\n        {\r\n            return(\r\n                <button type=\"button\" className=\"btn btn-success\" onClick={()=>this.tensorflowtinhtoan()}>TỰ HỌC</button> \r\n            );\r\n        }\r\n        else\r\n        {\r\n            return (this.props.dulieushh.sex);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n               \r\n                <div className=\"col\">\r\n                        {this.showconten()}\r\n                        <div className=\"card text-left\">\r\n                        <div className=\"card-body\">\r\n                        {this.props.dulieushh.cropped_idcard &&  <img className=\"card-img-top\" width=\"120px\" src={this.props.dulieushh.cropped_idcard} alt=\"demo\" /> }\r\n                        {this.props.dulieushh &&  <img className=\"card-img-top\" width=\"120px\" src={this.props.dulieushh} alt=\"\" /> }\r\n                        </div>\r\n                        <div className=\"card-body\" >\r\n                        {this.props.dulieushh.face &&  <img className=\"card-img-top left_manager\" style={{width: '240px',height: '300px', marginRight: '40px'}} src={this.props.dulieushh.face} alt=\"demo\" />}\r\n                            <div className=\"card-body\" style={{paddingTop: '0px'}}>\r\n                            {this.props.dulieushh.name && <h5 className=\"card-title color_mana mb-10\" style={{marginBottom: '16px'}}>Tên : {this.props.dulieushh.name}</h5> }\r\n                            {this.props.dulieushh.address &&   <h5 className=\"card-title color_mana mb-10\" style={{marginBottom: '16px'}}>Địa chỉ : {this.props.dulieushh.address}</h5> }\r\n                            {this.props.dulieushh.home && <h5 className=\"card-title color_mana mb-10\" style={{marginBottom: '16px'}}>Địa chỉ đăng ký : {this.props.dulieushh.home}</h5>}\r\n                            {this.props.dulieushh.id &&   <h5 className=\"card-title color_mana mb-10\" style={{marginBottom: '16px'}}>Số cmnd : {this.props.dulieushh.id}</h5>}\r\n                            {this.props.dulieushh.dob &&   <h5 className=\"card-title color_mana mb-10\" style={{marginBottom: '16px'}}>Ngày sinh : {this.props.dulieushh.dob}</h5> }\r\n                            {this.props.dulieushh.sex &&   <h5 className=\"card-title color_mana  mb-10\" style={{marginBottom: '16px'}}>Giới tính : {this.phongdoangioitinh()}     {this.state.ketquachinhthuc}</h5> }\r\n                            {this.props.dulieushh.doe &&   <h5 className=\"card-title color_mana\" style={{marginBottom: '16px'}}>Ngày hết hạn : {this.props.dulieushh.doe}</h5> }\r\n                            {this.props.dulieushh.nationality &&   <h5 className=\"card-title color_mana\" style={{marginBottom: '16px'}}>Quốc tịch : {this.props.dulieushh.nationality}</h5> }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default item;"]},"metadata":{},"sourceType":"module"}