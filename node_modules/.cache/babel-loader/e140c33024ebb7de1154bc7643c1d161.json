{"ast":null,"code":"var _jsxFileName = \"e:\\\\NODE_JS\\\\DM\\\\KCPM_K15A_WEBSITE_NHAN_DIEN_GT_VB\\\\src\\\\components\\\\FormTextBack.js\";\nimport React, { Component } from 'react';\nimport request from 'superagent';\nimport KOKOBAY from './itemback';\nimport mahoan2 from './mahoan2.json';\nimport { firebaseone } from '../firebaseconnectio';\nimport { connect } from 'react-redux';\n\nclass FormTextBack extends Component {\n  constructor(props) {\n    super(props);\n\n    this.isChange = event => {\n      const name = event.target.name;\n      const value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n      console.log(value);\n    };\n\n    this.Haller = () => {\n      if (this.state.image_url === \"\") {\n        alert('Yêu cầu bạn nhập thông tin');\n      } else {\n        var info = {};\n        info.image_url = this.state.image_url;\n        console.log(info);\n        request.post('https://api.openfpt.vn/cmt').set('Content-Type', 'application/x-www-form-urlencoded').set('api_key', 'dac21922a41a4422a6236c5990036ba3').send({\n          image_url: this.state.image_url\n        }).send({\n          face: 1\n        }).end(function (err, res) {\n          if (err) {\n            console.log(err);\n            alert(\"hết hạn số lượt gọi\");\n          } else {\n            console.log(res);\n            var items = JSON.parse(res.text);\n\n            if (res.body.errorCode === 3) {\n              alert('hệ thống không tìm thấy CMT trong ảnh hoặc ảnh có chất lượng kém (quá mờ, quá tối/sáng).');\n            } else if (res.body.errorCode === 1) {\n              alert('Sai thông số trong request (ví dụ không có key hoặc ảnh trong request body).');\n            } else if (res.body.errorCode === 2) {\n              alert('CMT trong ảnh bị thiếu góc nên không thể crop về dạng chuẩn.');\n            } else if (res.body.errorCode === 5) {\n              alert(' Request sử dụng key image_url nhưng giá trị bỏ trống.');\n            } else if (res.body.errorCode === 6) {\n              alert('Request sử dụng key image_url nhưng hệ thống không thể mở được URL này.');\n            } else if (res.body.errorCode === 7) {\n              alert('File gửi lên không phải là file ảnh.');\n            } else if (res.body.errorCode === 8) {\n              alert(' File ảnh gửi lên bị hỏng hoặc format không được hỗ trợ.');\n            } else if (res.body.errorCode === 9) {\n              alert(' Request sử dụng key image_base64 nhưng giá trị bỏ trống.');\n            } else if (res.body.errorCode === 10) {\n              alert('Request sử dụng key image_base64 nhưng string cung cấp không hợp lệ.');\n            } else {\n              console.log(items.data[0]);\n              localStorage.setItem('mahoan2', JSON.stringify(items.data[0]));\n              window.location.reload();\n            }\n          }\n        });\n      }\n    };\n\n    this.ButtonsClean = () => {\n      localStorage.removeItem('mahoan2');\n      window.location.reload();\n      this.props.ThuchienthaydoitrangthaiA();\n      this.props.ThuchienlaydulieuA(\"tiến trình làm sạch thành công \");\n    };\n\n    this.ShowKeyss = () => {\n      if (this.state.data2) {\n        return this.state.data2.map((value, key) => {\n          return React.createElement(\"option\", {\n            value: value.name,\n            key: key,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151\n            },\n            __self: this\n          }, value.name);\n        });\n      }\n    };\n\n    this.ShowKeyss2 = () => {\n      if (this.state.data2) {\n        return this.state.data2.map((value, key) => {\n          return React.createElement(\"option\", {\n            value: value.stt,\n            key: key,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }, value.stt);\n        });\n      }\n    };\n\n    this.updatedatahehe = () => {\n      if (this.state.persion && this.state.persion2) {\n        var info = {};\n        info.namess = this.state.persion;\n        info.key = this.state.persion2;\n        info.ethnicity = this.state.data.ethnicity;\n        info.ngayhethan = this.state.data.issue_date;\n        info.noicap = this.state.data.issue_loc;\n        info.tonhiao = this.state.data.religion;\n        this.props.ThucHienQuyTrinhLayData(info);\n        this.props.ThuchienthaydoitrangthaiA();\n        this.props.ThuchienlaydulieuA(\"tiến trình tải lên mặt sau cho \" + this.state.persion + \" thành công \");\n      } else {\n        if (this.state.persion === null) {\n          this.props.ThuchienthaydoitrangthaiA();\n          this.props.ThuchienlaydulieuA(\"Chúng tôi phát hiện bạn còn thiếu thông tin họ tên cần update\");\n        } else if (this.state.persion2 === null) {\n          this.props.ThuchienthaydoitrangthaiA();\n          this.props.ThuchienlaydulieuA(\"Chúng tôi phát hiện bạn còn thiếu thông tin key để update\");\n        } else {\n          this.props.ThuchienthaydoitrangthaiA();\n          this.props.ThuchienlaydulieuA(\"Chúng tôi phát hiện bạn còn thiếu thông tin để update\");\n        }\n      }\n    };\n\n    this.state = {\n      image_url: '',\n      data: '',\n      data2: '',\n      persion: '',\n      persion2: ''\n    };\n  }\n\n  componentWillMount() {\n    firebaseone.on('value', datass => {\n      var Mang2 = [];\n      datass.forEach(element => {\n        const stt = element.key;\n        const key = element.val().key;\n        const name = element.val().name;\n        Mang2.push({\n          stt: stt,\n          key: key,\n          name: name\n        });\n      });\n      this.setState({\n        data2: Mang2\n      });\n    });\n\n    if (localStorage.getItem('mahoan2') === null) {\n      localStorage.setItem('mahoan2', JSON.stringify(mahoan2));\n    } else {\n      var template = JSON.parse(localStorage.getItem('mahoan2'));\n      this.setState({\n        data: template\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('mahoan2') === null) {\n      localStorage.setItem('mahoan2', JSON.stringify(mahoan2));\n    } else {\n      var template = JSON.parse(localStorage.getItem('mahoan2'));\n      this.setState({\n        data: template\n      });\n    }\n  }\n\n  render() {\n    console.log(this.state.data);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group mb-3 mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      onChange: event => this.isChange(event),\n      placeholder: \"import link images\",\n      name: \"image_url\",\n      \"aria-label\": \"Recipient's username\",\n      \"aria-describedby\": \"basic-addon2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"input-group-append\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"basic-addon2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \".JPG/.JPEG/.PNG\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: () => this.Haller(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-archway\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#exampleModalCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-cloud-upload-alt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-warning\",\n      onClick: () => this.ButtonsClean(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-eraser\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    })))), React.createElement(KOKOBAY, {\n      dulieushh: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"exampleModalCenter\",\n      tabIndex: -1,\n      role: \"dialog\",\n      \"aria-labelledby\": \"exampleModalCenterTitle\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-dialog modal-dialog-centered\",\n      role: \"document\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"modal-title\",\n      id: \"exampleModalLongTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Modal title\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"\\xD7\"))), React.createElement(\"div\", {\n      className: \"modal-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      multiple: true,\n      className: \"form-control\",\n      onChange: event => this.isChange(event),\n      name: \"persion\",\n      id: \"exampleFormControlSelect2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \" --- T\\xEAn th\\xE0nh vi\\xEAn --- \"), this.ShowKeyss())), React.createElement(\"div\", {\n      className: \"form-group col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      multiple: true,\n      className: \"form-control\",\n      onChange: event => this.isChange(event),\n      name: \"persion2\",\n      id: \"exampleFormControlSelect2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \" --- Ch\\u1ECDn m\\xE3 s\\u1ED1 key --- \"), this.ShowKeyss2())))), React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      \"data-dismiss\": \"modal\",\n      onClick: () => this.updatedatahehe(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Save change\"))))));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    ThucHienUpdatematSauState: state.updatematsau\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    ThucHienQuyTrinhLayData: getitem => {\n      dispatch({\n        type: 'GET_DATA_MASTER_BACK',\n        getitem\n      });\n    },\n    ThuchienthaydoitrangthaiA: () => {\n      dispatch({\n        type: 'TRANG_THAI'\n      });\n    },\n    ThuchienlaydulieuA: getitem => {\n      dispatch({\n        type: 'GETDATA',\n        getitem\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormTextBack);","map":{"version":3,"sources":["e:\\NODE_JS\\DM\\KCPM_K15A_WEBSITE_NHAN_DIEN_GT_VB\\src\\components\\FormTextBack.js"],"names":["React","Component","request","KOKOBAY","mahoan2","firebaseone","connect","FormTextBack","constructor","props","isChange","event","name","target","value","setState","console","log","Haller","state","image_url","alert","info","post","set","send","face","end","err","res","items","JSON","parse","text","body","errorCode","data","localStorage","setItem","stringify","window","location","reload","ButtonsClean","removeItem","ThuchienthaydoitrangthaiA","ThuchienlaydulieuA","ShowKeyss","data2","map","key","ShowKeyss2","stt","updatedatahehe","persion","persion2","namess","ethnicity","ngayhethan","issue_date","noicap","issue_loc","tonhiao","religion","ThucHienQuyTrinhLayData","componentWillMount","on","datass","Mang2","forEach","element","val","push","getItem","template","componentDidMount","render","mapStateToProps","ownProps","ThucHienUpdatematSauState","updatematsau","mapDispatchToProps","dispatch","getitem","type"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport request from 'superagent';\r\nimport KOKOBAY from './itemback';\r\nimport mahoan2 from './mahoan2.json';\r\nimport {firebaseone} from '../firebaseconnectio';\r\nimport {connect} from 'react-redux';\r\nclass FormTextBack extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            image_url : '',\r\n            data : '',\r\n            data2 : '',\r\n            persion : '',\r\n            persion2 : ''\r\n        };\r\n    }\r\n    isChange = (event) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n        this.setState({\r\n            [name] : value\r\n        })\r\n        console.log(value);\r\n    }\r\n    Haller = () => {\r\n        if(this.state.image_url === \"\")\r\n        {\r\n          alert('Yêu cầu bạn nhập thông tin');\r\n        }\r\n        else\r\n        {\r\n          var info = {};\r\n          info.image_url = this.state.image_url;\r\n          console.log(info);\r\n          request\r\n          .post('https://api.openfpt.vn/cmt')\r\n          .set('Content-Type', 'application/x-www-form-urlencoded')\r\n          .set('api_key', 'dac21922a41a4422a6236c5990036ba3')\r\n          .send({image_url: this.state.image_url})\r\n          .send({face:1})\r\n          .end(function(err, res){\r\n          if(err)\r\n          {\r\n              console.log(err);\r\n              alert(\"hết hạn số lượt gọi\");\r\n          }\r\n          else\r\n          {\r\n              console.log(res);\r\n              var items = JSON.parse(res.text);\r\n              if(res.body.errorCode === 3)\r\n              {\r\n                  alert('hệ thống không tìm thấy CMT trong ảnh hoặc ảnh có chất lượng kém (quá mờ, quá tối/sáng).');\r\n              }\r\n              else if (res.body.errorCode === 1)\r\n              {\r\n                  alert('Sai thông số trong request (ví dụ không có key hoặc ảnh trong request body).');\r\n              }\r\n              else if (res.body.errorCode === 2)\r\n              {\r\n                  alert('CMT trong ảnh bị thiếu góc nên không thể crop về dạng chuẩn.');\r\n              }\r\n              else if (res.body.errorCode === 5)\r\n              {\r\n                  alert(' Request sử dụng key image_url nhưng giá trị bỏ trống.');\r\n              }\r\n              else if (res.body.errorCode === 6)\r\n              {\r\n                  alert('Request sử dụng key image_url nhưng hệ thống không thể mở được URL này.');\r\n              }\r\n              else if (res.body.errorCode === 7)\r\n              {\r\n                  alert('File gửi lên không phải là file ảnh.');\r\n              }\r\n              else if (res.body.errorCode === 8)\r\n              {\r\n                  alert(' File ảnh gửi lên bị hỏng hoặc format không được hỗ trợ.');\r\n              }\r\n              else if (res.body.errorCode === 9)\r\n              {\r\n                  alert(' Request sử dụng key image_base64 nhưng giá trị bỏ trống.');\r\n              }\r\n              else if (res.body.errorCode === 10)\r\n              {\r\n                  alert('Request sử dụng key image_base64 nhưng string cung cấp không hợp lệ.');\r\n              }\r\n              else\r\n              {\r\n                console.log(items.data[0]);\r\n                localStorage.setItem('mahoan2',JSON.stringify(items.data[0]));\r\n                window.location.reload();\r\n              }\r\n          }\r\n          });\r\n        }    \r\n    }\r\n    componentWillMount() {\r\n        firebaseone.on('value',(datass) => {\r\n            var Mang2 = [];\r\n            datass.forEach(element => {\r\n                const stt = element.key;\r\n                const key = element.val().key;\r\n                const name = element.val().name;\r\n                Mang2.push({\r\n                    stt : stt,\r\n                    key : key,\r\n                    name : name,\r\n                })\r\n            });\r\n            this.setState({\r\n                data2 : Mang2\r\n            });\r\n        })\r\n        if(localStorage.getItem('mahoan2') === null)\r\n        {\r\n            localStorage.setItem('mahoan2',JSON.stringify(mahoan2));\r\n        }\r\n        else\r\n        {\r\n            var template = JSON.parse(localStorage.getItem('mahoan2'));\r\n            this.setState({\r\n                data : template\r\n            })\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        if(localStorage.getItem('mahoan2') === null)\r\n        {\r\n            localStorage.setItem('mahoan2',JSON.stringify(mahoan2));\r\n        }\r\n        else\r\n        {\r\n            var template = JSON.parse(localStorage.getItem('mahoan2'));\r\n            this.setState({\r\n                data : template\r\n            })\r\n        }\r\n    }\r\n    ButtonsClean = () => {\r\n        localStorage.removeItem('mahoan2');\r\n        window.location.reload();\r\n        this.props.ThuchienthaydoitrangthaiA();\r\n        this.props.ThuchienlaydulieuA(\"tiến trình làm sạch thành công \");\r\n    }\r\n\r\n    ShowKeyss = () => {\r\n        if(this.state.data2)\r\n        {\r\n            return this.state.data2.map((value , key) => {\r\n                return   <option value={value.name} key={key}>{value.name}</option>;\r\n            })\r\n        }\r\n    }\r\n\r\n    ShowKeyss2 = () => {\r\n        if(this.state.data2)\r\n        {\r\n            return this.state.data2.map((value , key) => {\r\n                return   <option value={value.stt} key={key}>{value.stt}</option>;\r\n            })\r\n        }\r\n    }\r\n\r\n    updatedatahehe = () => {\r\n        if(this.state.persion && this.state.persion2)\r\n        {\r\n            var info = {};\r\n            info.namess = this.state.persion;\r\n            info.key = this.state.persion2;\r\n            info.ethnicity = this.state.data.ethnicity;\r\n            info.ngayhethan = this.state.data.issue_date;\r\n            info.noicap = this.state.data.issue_loc;\r\n            info.tonhiao = this.state.data.religion;\r\n            this.props.ThucHienQuyTrinhLayData(info);\r\n            this.props.ThuchienthaydoitrangthaiA();\r\n            this.props.ThuchienlaydulieuA(\"tiến trình tải lên mặt sau cho \" + this.state.persion + \" thành công \");\r\n        }\r\n        else\r\n        {\r\n            if(this.state.persion === null)\r\n            {\r\n                this.props.ThuchienthaydoitrangthaiA();\r\n                this.props.ThuchienlaydulieuA(\"Chúng tôi phát hiện bạn còn thiếu thông tin họ tên cần update\");\r\n            }\r\n            else if(this.state.persion2 === null)\r\n            {\r\n                this.props.ThuchienthaydoitrangthaiA();\r\n                this.props.ThuchienlaydulieuA(\"Chúng tôi phát hiện bạn còn thiếu thông tin key để update\");\r\n            }\r\n            else\r\n            {\r\n                this.props.ThuchienthaydoitrangthaiA();\r\n                this.props.ThuchienlaydulieuA(\"Chúng tôi phát hiện bạn còn thiếu thông tin để update\");\r\n            }\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        console.log(this.state.data);\r\n        return (\r\n            <div>\r\n                     <div className=\"input-group mb-3 mt-5\">\r\n                    <input type=\"text\" className=\"form-control\" onChange={(event)=>this.isChange(event)} placeholder=\"import link images\" name=\"image_url\" aria-label=\"Recipient's username\" aria-describedby=\"basic-addon2\" />\r\n                    <div className=\"input-group-append\">\r\n                    <span className=\"input-group-text\" id=\"basic-addon2\">.JPG/.JPEG/.PNG</span>\r\n                    <button type=\"button\" className=\"btn btn-success\" onClick={()=>this.Haller()}><i className=\"fas fa-archway\"></i></button>\r\n                    <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\"><i className=\"fas fa-cloud-upload-alt\"></i></button>\r\n                    <button type=\"button\" className=\"btn btn-warning\" onClick={()=>this.ButtonsClean()}><i className=\"fas fa-eraser\"></i></button>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n            <KOKOBAY dulieushh={this.state.data}/>\r\n\r\n            <div className=\"modal fade\" id=\"exampleModalCenter\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n              <div className=\"modal-content\">\r\n                <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">Modal title</h5>\r\n                  <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">×</span>\r\n                  </button>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n\r\n                <div className=\"form-row\">\r\n            <div className=\"form-group col-md-6\">\r\n            \r\n                  <select multiple className=\"form-control\"  onChange={(event)=>this.isChange(event)} name=\"persion\"  id=\"exampleFormControlSelect2\">\r\n                          <option value> --- Tên thành viên --- </option>\r\n                            {this.ShowKeyss()}\r\n                  </select>\r\n            </div>\r\n              <div className=\"form-group col-md-6\">\r\n               \r\n              <select multiple className=\"form-control\"  onChange={(event)=>this.isChange(event)} name=\"persion2\" id=\"exampleFormControlSelect2\">\r\n                            <option value> --- Chọn mã số key --- </option>\r\n                            {this.ShowKeyss2()}\r\n                    </select>\r\n              </div>\r\n          </div>                \r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                  <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={()=>this.updatedatahehe()}>Save change</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        ThucHienUpdatematSauState: state.updatematsau\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        ThucHienQuyTrinhLayData: (getitem) => {\r\n            dispatch({type:'GET_DATA_MASTER_BACK',getitem})\r\n        },\r\n        ThuchienthaydoitrangthaiA: () => {\r\n            dispatch({type:'TRANG_THAI'})\r\n        },\r\n        ThuchienlaydulieuA: (getitem) => {\r\n            dispatch({type:'GETDATA',getitem})\r\n        }\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormTextBack);"]},"metadata":{},"sourceType":"module"}